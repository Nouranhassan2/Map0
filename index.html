<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Neighborhood Map</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSQwC16g8ZKoyVC2EpixPr0e-7IcPII14&libraries=places&callback=initMap" async defer></script>
  <style>
    body {
      font-family: 'Your Website Font', sans-serif;
    }
    #map {
      height: 100vh;
      width: 100%;
      transition: width 0.3s;
    }
    #sidebar {
      height: 100%;
      width: 30%;
      position: fixed;
      right: 0;
      top: 0;
      background-color: #f8f9fa;
      box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2);
      padding: 20px;
      display: none;
      z-index: 1000;
      transition: transform 0.3s ease;
    }
    .share {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      position: absolute;
      top: 32px;
      left: 10px;
    }
    #sidebar h3 {
      margin-top: 0;
    }
    #close-sidebar {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #d9534f;
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 5px;
    }
    #search-input {
      width: 300px;
      height: 30px;
      margin-right: 10px;
      padding: 5px;
      font-size: 16px;
      margin-top: 35px;
      background-color: #f8f9fa;
      z-index: 999999999999999999999;
    }
    #search-button {
      padding: 5px 10px;
      font-size: 16px;
      margin-top: 35px;
      cursor: pointer;
    }
    .whatsapp-share-btn {
      display: inline-block;
      background-color: #25D366;
      color: white;
      padding: 13px 15px;
      font-size: 16px;
      text-decoration: none;
      border-radius: 5px;
      margin-top: 35px;
    }
    .whatsapp-share-btn:hover {
      background-color: #20b858;
    }
    .info-header {
      font-size: 25px;
      margin-bottom: 10px;
    }
    .info-content {
      font-size: 17px;
      padding: 10px;
    }
    .whatsapp-share-btn {
      z-index: 99999;
      margin-left: 50px;
    }
    @media (max-width: 545px) {
      .share {
        display: flex;
        flex-direction: column;
        width: fit-content;
      }
      .whatsapp-share-btn {
        margin: 10px 0px 0px px;
      }
    }
    @media (max-width: 768px) {
      #sidebar {
        width: 100%;
      }
      #map {
        height: 60vh;
      }
      .whatsapp-share-btn {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>

  <!-- Search input and WhatsApp button container -->
  <div id="controls" class="share">
    <input id="search-input" type="text" placeholder="Search " />
    <button id="search-button">Search</button>
    <a id="share-btn-sidebar" href="#" target="_blank" class="whatsapp-share-btn">Share on WhatsApp</a>
  </div>

  <!-- Div to display the map -->
  <div id="map"></div>

  <!-- Sidebar to show location details -->
  <div id="sidebar">
    <button id="close-sidebar">X</button>
    <h3 id="location-name" class="info-header"></h3>
    <div class="info-content">
      <p><strong>Location:</strong> <span id="location-details"></span></p>
      <a id="location-link" href="#" target="_blank">Visit website</a>
      <br><br>
      <img id="location-image" src="" alt="Location image" style="width:100%; height:auto;">
    </div>
  </div>

  <script>
    let map, highlightCircle;
    let markers = [];
    const locations = [
      { lat: 21.2854, lng: 39.2376, name: 'حي السنابل - جدة', link: 'https://jed1.matajeralhai.com/', image: 'https://jed1.matajeralhai.com/Images/Photos/63f719b49e404dbb9a7217ded02fef23.webp' },
      { lat: 21.2854, lng: 39.2376, name: 'حي الأجاويد - جدة', link: 'https://jed1.matajeralhai.com/', image: '' },
      { lat: 21.3000, lng: 39.2400, name: 'حي الهدي - جدة', link: 'https://jed1.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.2960, lng: 39.2350, name: 'حي الأمير عبد المجيد - جدة', link: 'https://jed1.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.2800, lng: 39.2150, name: 'حي العدل - جدة', link: 'https://jed1.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.2500, lng: 39.1800, name: 'حي الأمير فواز - جدة', link: 'https://jed1.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.3000, lng: 39.2300, name: 'حي الجوهرة - جدة', link: 'https://jed1.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.2800, lng: 39.1850, name: 'حي الشفا - جدة', link: 'https://jed1.matajeralhai.com/', icon: '', image: '' },



      { lat: 21.5433, lng: 39.1728, name: 'حي الرياض - جدة', link: 'https://jed6.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.5433, lng: 39.1728, name: 'حي طيبة - جدة', link: 'https://jed6.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.6682, lng: 39.1091, name: 'حي أبحر - جدة', link: 'https://jed6.matajeralhai.com/', icon: '', image: '' },



      { lat: 21.5454, lng: 39.2049, name: 'حي الحمدانية - جدة', link: 'https://jed4.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.51, lng: 39.27, name: 'حي البشائر - جدة', link: 'https://jed4.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.52, lng: 39.28, name: 'حي الرحمانية - جدة', link: 'https://jed4.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.53, lng: 39.29, name: 'حي الكوثر - جدة', link: 'https://jed4.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.54, lng: 39.30, name: 'حي الريان - جدة', link: 'https://jed4.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.55, lng: 39.31, name: 'حي الصالحية - جدة', link: 'https://jed4.matajeralhai.com/', icon: '', image: '' },
    { lat: 21.57, lng: 39.33, name: 'حي الفلاح - جدة', link: 'https://jed4.matajeralhai.com/', icon: '', image: '' },


      { lat: 21.5027, lng: 39.2433, name: 'حي الفضيلة - جدة', link: 'https://jed5.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.4354, lng: 39.3705, name: 'حي القرينية - جدة', link: 'https://jed5.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.4822, lng: 39.2224, name: 'الخمرة - جدة', link: 'https://jed5.matajeralhai.com/', icon: '', image: '' },


      { lat: 21.5752, lng: 39.2125, name: 'حي السامر - جدة', link: 'https://jed2.matajeralhai.com/', icon: '', image: '' },


      { lat: 25.7605, lng: 45.3943, name: 'حي تمير - الرياض', link: 'https://rydh5.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.3870, lng: 39.9850, name: ' حي الخالدية', link: 'https://rydh5.matajeralhai.com/', icon: '', image: ''  },
      { lat: 24.7240, lng: 46.6630, name: 'حي العزيزية - الرياض', link: 'https://rydh5.matajeralhai.com/', icon: '', image: '' },




      { lat: 21.6319, lng: 39.1225, name: 'حي النعيم - جدة', link: 'https://jed10.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.6159, lng: 39.1277, name: 'حي المحمدية - جدة', link: 'https://jed10.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.6261, lng: 39.1425, name: 'حي المرجان - جدة', link: 'https://jed10.matajeralhai.com/', icon: '', image: '' },
      { lat: 21.6195, lng: 39.1480, name: 'حي البساتين - جدة', link: 'https://jed10.matajeralhai.com/', icon: '', image: '' },



      { lat: 24.7402, lng: 46.6520, name: 'حي الغدير - الرياض', link: 'https://rydh1.matajeralhai.com/', icon: '', image: '' },
      { lat: 24.7889, lng: 46.7223, name: 'حي الفلاح - الرياض', link: 'https://rydh2.matajeralhai.com/', icon: '', image: '' },
      { lat: 24.7688, lng: 46.7111, name: 'حي الوادي - الرياض', link: 'https://rydh3.matajeralhai.com/', icon: '', image: '' },
      { lat: 24.7725, lng: 46.7087, name: 'حي النفل - الرياض', link: 'https://rydh4.matajeralhai.com/', icon: '', image: '' },



      { lat: 21.5892, lng: 39.1979, name: 'حي الصفا - جدة', link: 'https://jed3.matajeralhai.com/', icon: '', image: '' },


      { lat: 21.3891, lng: 39.8579, name: 'حي الزايدي - مكة', link: 'https://mak2.matajeralhai.com/', icon: '', image: '' },


      { lat: 21.4243, lng: 39.8259, name: 'حي التنعيم - مكة', link: 'https://mak1.matajeralhai.com/', icon: '', image: '' },


      { lat: 21.4878, lng: 39.1843, name: 'باب مكة - جدة', link: 'https://jed8.matajeralhai.com/', icon: '', image: '' },

      { lat: 25.5951, lng: 45.6338, name: 'حي سدير - الرياض', link: 'https://rydh6.matajeralhai.com/mainPage', icon: '', image: '' },
      { lat: 24.7642, lng: 46.6882, name: 'حي الوسطي - الرياض', link: 'https://rydh6.matajeralhai.com/mainPage', icon: '', image: '' },
      { lat: 24.7350, lng: 46.6670, name: 'حي القادسية - الرياض', link: 'https://rydh6.matajeralhai.com/mainPage', icon: '', image: '' },
      { lat: 24.7416, lng: 46.6850, name: ' حي الزهرة - الرياض', link: 'https://rydh6.matajeralhai.com/mainPage', icon: '', image: '' },
      { lat: 24.7574, lng: 46.6951, name: 'حي الروضة - الرياض', link: 'https://rydh6.matajeralhai.com/mainPage', icon: '', image: '' },
      { lat: 24.7240, lng: 46.6630, name: 'حي العزيزية - الرياض', link: 'https://rydh6.matajeralhai.com/mainPage', icon: '', image: '' },
      { lat: 24.7000, lng: 39.6000, name: 'حي النهضة - الرياض', link: 'https://rydh6.matajeralhai.com/mainPage', icon: '', image: ''  },


{ lat: 25.5902, lng: 45.3012, name: 'المجمعة', link: 'https://rydh7.matajeralhai.com/mainPage', icon: '', image: '' },
{ lat: 24.7060, lng: 46.6770, name: 'حي الملك سلمان - المجمعة', link: 'https://rydh7.matajeralhai.com/mainPage', icon: '', image: '' },
{ lat: 24.7130, lng: 46.7040, name: 'حى المطار - المجمعة', link: 'https://rydh7.matajeralhai.com/mainPage', icon: '', image: '' },
{ lat: 24.7240, lng: 46.6760, name: 'حي الملك عبدالله- المجمعة', link: 'https://rydh7.matajeralhai.com/mainPage', icon: '', image: '' },
{ lat: 24.7160, lng: 46.6850, name: 'حي الفيحاء - المجمعة', link: 'https://rydh7.matajeralhai.com/mainPage', icon: '', image: '' },
{ lat: 24.7260, lng: 46.6630, name: ' حي اليرموك - المجمعة', link: 'https://rydh7.matajeralhai.com/mainPage', icon: '', image: '' },
{ lat: 24.7220, lng: 46.6750, name: 'حي الملك فهد - المجمعة', link: 'https://rydh7.matajeralhai.com/mainPage', icon: '', image: '' },


{ lat: 21.6011, lng: 39.1802, name: 'النسيم والسليمانية - جدة', link: '', icon: '', image: '' },



{ lat: 24.7330, lng: 46.6970, name: 'حي الحاوية - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7400, lng: 46.6790, name: 'حي الزرقا - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7200, lng: 46.6840, name: 'حي الشفا - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7350, lng: 46.6700, name: 'حي الشهبة - الباحة', link: '', icon: '', image: '' },
    { lat: 21.3880, lng: 39.9770, name: 'حي الظفير - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7300, lng: 46.6700, name: 'حي رغدان - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7500, lng: 46.6880, name: 'الشروق - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7420, lng: 46.6850, name: 'النزهة - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7400, lng: 46.6770, name: 'السلامة - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7500, lng: 46.6700, name: 'الباهر - الباحة', link: '', icon: '', image: '' },
    { lat: 21.5320, lng: 39.2140, name: 'حي الصفا - الباحة', link: '', icon: '', image: '' },
    { lat: 24.7430, lng: 46.6810, name: 'وسط المدينة - الباحة', link: '', icon: '', image: '' },


{ lat: 24.7490, lng: 46.6720, name: 'حي النزهة - شقراء', link: '', icon: '', image: '' },
    { lat: 24.7402, lng: 46.6520, name: 'حي الروضة - شقراء', link: '', icon: '', image: '' },
    { lat: 24.7400, lng: 46.6680, name: 'حي الملك فهد - شقراء', link: '', icon: '', image: '' },
    { lat: 20.3390, lng: 40.5700, name: 'حي الباهر - شقراء', link: '', icon: '', image: '' },












    { lat: 16.8894, lng: 42.5824, name: 'حي الشاطئ - جيزان', link: 'https://jzn1.matajeralhai.com', icon: '', image: '' },
    { lat: 16.8900, lng: 42.5800, name: 'حي الروضة - جيزان', link: 'https://jzn1.matajeralhai.com', icon: '', image: '' },
    { lat: 16.8920, lng: 42.5840, name: 'حي السويس - جيزان', link: 'https://jzn1.matajeralhai.com', icon: '', image: '' },
    { lat: 16.8930, lng: 42.5860, name: 'حي الصفا - جيزان', link: 'https://jzn1.matajeralhai.com', icon: '', image: '' },
    { lat: 16.8940, lng: 42.5880, name: 'حي الروابي - جيزان', link: 'https://jzn1.matajeralhai.com', icon: '', image: '' },
    { lat: 16.8950, lng: 42.5900, name: 'حي الزهور - جيزان', link: 'https://jzn1.matajeralhai.com', icon: '', image: '' },
    { lat: 16.8960, lng: 42.5920, name: 'حي النور - جيزان', link: 'https://jzn1.matajeralhai.com', icon: '', image: '' },




    { lat: 24.4620, lng: 39.6120, name: 'حي الدفاع - المدينة المنورة', link: 'https://md1.matajeralhai.com/', icon: '', image: '' },
    { lat: 24.4740, lng: 39.6100, name: 'حي الخالدية - المدينة المنورة', link: 'https://md1.matajeralhai.com/', icon: '', image: '' },





      { lat: 18.2175, lng: 42.5058, name: 'حي المفتاحة - أبها', link: 'https://ba1.matajeralhai.com/mainPage', icon: '', image: '' },

      { lat: 21.5165, lng: 39.1790, name: 'حي السمراء - حائل', link: '', icon: '', image: '' },

      { lat: 26.2085, lng: 43.5672, name: 'حي الفصيلية - الزلفى', link: '', icon: '', image: ''  },

      { lat: 21.5460, lng: 39.1690, name: 'حي السلام - بريدة', link: '', icon: '', image: '' },
    { lat: 21.6100, lng: 39.1240, name: 'حي البساتين - بريدة', link: '', icon: '', image: '' },



    { lat: 20.1938, lng: 41.4710, name: 'حي المحمدية - بلجرشي', link: '', icon: '', image: '' },




      { lat: 26.0995, lng: 43.9741, name: 'حي الضليعة - عنيزة', link: '', icon: '', image: ''  },
      { lat: 26.0963, lng: 43.9741, name: 'حي العليا - عنيزة', link: '', icon: '', image: ''  },



      { lat: 20.2196, lng: 40.3367, name: ' الليث - الليث', link: '', icon: '', image: ''  },

      { lat: 25.0243, lng: 45.3072, name: 'حي الصناعية - جلاجل', link: '', icon: '', image: ''  },

      { lat: 25.2745, lng: 45.3825, name: 'حي الخزامى - الغاط', link: '', icon: '', image: ''  },

      { lat: 24.7490, lng: 46.6720, name: 'حي النزهة - رياض الخبراء', link: '', icon: '', image: ''  },

      { lat: 20.6098, lng: 41.7462, name: 'حي الخالدية - القنفذة', link: '', icon: '', image: '' },

      { lat: 17.1865, lng: 42.5923, name: 'حي النهضة - صبيا', link: '', icon: '', image: '' },

    { lat: 17.1282, lng: 42.4447, name: 'حي الشريعة - بيش', link: '', icon: '', image: '' },

    { lat: 20.2200, lng: 41.6300, name: 'حي البدر - المندق', link: '', icon: '', image: '' },

    { lat: 18.1918, lng: 42.4680, name: 'حي المجد - المنطقة الجنوبية', link: '', icon: '', image: '' },



    ];

    function initMap() {
   const mapCenter = { lat: 24.0000, lng: 45.0000 };
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 6,
        center: mapCenter,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        restriction: {
          latLngBounds: {
            north: 32.0,
            south: 16.5,
            west: 36.5,
            east: 50.5
          },
          strictBounds: true
        }
      });

      // Create markers
      locations.forEach(location => {
        const marker = new google.maps.Marker({
          position: { lat: location.lat, lng: location.lng },
          map: map,
          icon: {
            url: './pin.svg',
            scaledSize: new google.maps.Size(50, 40)
          }
        });

        marker.addListener('click', () => {
          showSidebar(location);
        });

        markers.push(marker);
      });
    }

    function performSearch() {
      const inputText = document.getElementById("search-input").value.toLowerCase().trim();
      if (inputText === "") {
        alert("يرجى إدخال اسم الحي.");
        return;
      }
      let foundLocations = [];
      locations.forEach(location => {
        if (location.name.toLowerCase().includes(inputText)) {
          foundLocations.push(location);
        }
      });

      // Clear existing markers
      markers.forEach(marker => marker.setMap(null));
      markers = [];

      // Clear existing circle
      if (highlightCircle) {
        highlightCircle.setMap(null);
      }

      if (foundLocations.length === 0) {
        alert("لا توجد نتائج مطابقة. يرجى إدخال اسم حي صحيح.");
      } else {
        const bounds = new google.maps.LatLngBounds();
        foundLocations.forEach(location => {
          const marker = new google.maps.Marker({
            position: { lat: location.lat, lng: location.lng },
            map: map,
            icon: {
              url: './pin.svg',
              scaledSize: new google.maps.Size(50, 40)
            },
            title: location.name
          });

          marker.addListener('click', () => {
            showSidebar(location);
          });

          markers.push(marker);
          bounds.extend(marker.position);
        });
        map.fitBounds(bounds);
        if (foundLocations.length === 1) {
          map.setZoom(16);

          // Draw circle around the found location
          highlightCircle = new google.maps.Circle({
            strokeColor: "#FF0000",
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: "#FF0000",
            fillOpacity: 0,
            map: map,
            center: { lat: foundLocations[0].lat, lng: foundLocations[0].lng },
            radius: 500
          });

          // Show sidebar for the found location
          showSidebar(foundLocations[0]);
        }
      }
    }

    function showSidebar(location) {
      document.getElementById('location-name').textContent = location.name;
      document.getElementById('location-details').textContent = location.name;
      document.getElementById('location-link').href = location.link || '#';
      document.getElementById('location-image').src = location.image || 'https://via.placeholder.com/300';

      const shareMessage = `Check out this location: ${location.name} - Coordinates: ${location.lat}, ${location.lng}`;
      const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareMessage)}`;
      document.getElementById('share-btn-sidebar').href = whatsappUrl;

      document.getElementById('sidebar').style.display = 'block';
      document.getElementById('map').style.width = '70%';

      google.maps.event.trigger(map, 'resize');
    }

    document.getElementById('close-sidebar').addEventListener('click', function() {
      document.getElementById('sidebar').style.display = 'none';
      document.getElementById('map').style.width = '100%';

      google.maps.event.trigger(map, 'resize');
    });

    document.getElementById('search-button').addEventListener('click', function() {
      performSearch();
    });

    document.getElementById('search-input').addEventListener('keyup', function(event) {
      if (event.keyCode === 13) {
        performSearch();
      }
    });

    // Initialize the map
    window.onload = initMap;
  </script>
</body>
</html>